
let sound: p5.SoundFile;
declare function loadSound(path: string): p5.SoundFile;
let tracker;
let capture;
declare let ml5: any;


function soundLoaded() {
  console.log('Sound loaded');
}

// P5 will call this function to preload any assets (sounds, sprites, etc) and will continue with setup only when finished
function preload() {
  //sound = new p5.SoundFile('assets/ding.mp3', soundLoaded);
  sound = loadSound('assets/ding.mp3');
  console.log('Preload finished');
}

function setup() {

  console.log("ðŸš€ - Setup initialized - P5 is running");
  createCanvas(windowWidth, windowHeight);
  capture = createCapture(VIDEO);
  capture.size(width, height);


  background(255);
  fill(0);

  let qr = qrcode(4, 'L');
  let tracker = new clm.tracker();

  qr.addData('https://code.dblock.org');
  qr.make();

  text(qr.createASCII(), 1, 1);


  //capture.hide();
  // Instantiate face tracking (CLM tracer)
  console.log(ml5);

  tracker = new clm.tracker();
  tracker.init();
  tracker.start(capture.elt);

  sound.play();
}

// P5 will run this function whenever window is resized
function windowResized() {
  resizeCanvas(windowWidth, windowHeight);
}

let posX = 0;
let posY = 0;
let speedX = 5;
let speedY = 5;
let colorRed;
let colorGreen;
let colorBlue;
let diameter;

// P5 will call this method with animation frame defined with frameRate
function draw_() {
  posX = posX + speedX;
  posY = posY + speedY;

  if (posX > width || posX < 0) {
    speedX = speedX * -1;
  }
  if (posY > height || posY < 0) {
    speedY = speedY * -1;
  }
  colorBlue = map(posY, 0, height, 50, 255)
  colorRed = map(posX, 0, width, 50, 255)
  diameter = map(posY, 0, height, 10, 300);
  fill(colorRed, 0, colorBlue);
  noStroke();
  circle(posX, posY, diameter);
}

function draw() {
  
}
